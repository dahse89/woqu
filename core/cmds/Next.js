// Generated by CoffeeScript 1.4.0
(function() {
  var Next;

  module.exports = Next = (function() {

    function Next(master, args) {
      this.master = master;
      this.args = args;
    }

    Next.prototype.init = function() {
      this.db = this.master.getDb();
      return this.moveCurTaskBackwards();
    };

    /**
    * update Task to increase postponed
    */


    Next.prototype.moveCurTaskBackwards = function(task) {
      var master;
      master = this.master;
      return this.db.init(function(db) {
        return db.getCurrentTask(function(task) {
          task.increasePostponed();
          return db.updateTask(task, function() {
            var todo;
            todo = master.factory().get(master, 'todo');
            return todo.init();
          });
        });
      });
    };

    return Next;

  })();

  module.exports = Next;

}).call(this);
