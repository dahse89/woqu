// Generated by CoffeeScript 1.9.1
(function() {
  var Add;

  module.exports = Add = (function() {
    function Add(master, args) {
      this.master = master;
      this.args = args;
    }

    Add.prototype.init = function() {
      var IO, addTaskMsg, descMsg, ref;
      ref = this.master.factory('IO', 'config/messages.description', 'config/messages.addTask'), IO = ref[0], descMsg = ref[1], addTaskMsg = ref[2];
      if (this.args.length === 0) {
        IO.readLine(descMsg + ": ", function(answer, IO) {
          return IO.println(addTaskMsg + answer);
        });
        return;
      }
      if (this.args.length === 1) {
        return this.addTask(this.args[0]);
      }
    };


    /**
    * add a Task to database
     */

    Add.prototype.addTask = function(description) {
      var IO, Task, addTaskMsg, ref, task;
      ref = this.master.factory('IO', 'model/Task', 'config/messages.addTask'), IO = ref[0], Task = ref[1], addTaskMsg = ref[2];
      task = Task.build({
        description: description,
        poststponed: 0
      });
      return task.save()["catch"](IO.error).then(function(task) {
        IO.println(addTaskMsg + task.id);
        return process.exit();
      });
    };

    return Add;

  })();

  module.exports = Add;

}).call(this);
